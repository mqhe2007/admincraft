(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{170:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),a("p",[t._v("基本信息，用来描述此工程。")]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),a("p",[t._v("vue 工程的名称。")]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),a("p",[t._v("vue 工程的版本号，版本号命名应遵从"),a("a",{attrs:{href:"https://semver.org/lang/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[t._v("语义化版本规范"),a("OutboundLink")],1),t._v("。")]),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),a("p",[t._v("vue 远程模块作者，暂时无用。")]),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),a("p",[t._v("框架开发人员得到模块开发人员的外部依赖清单后，需要在此文件中手动添加外部依赖，这些外部依赖在主框架打包时会被单独打包，以便更好的缓存。")]),t._v(" "),t._m(13),a("p",[t._v("同样，在框架中要用的第三方包也可以添加到本文件中。")]),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),a("p",[t._v("构建模式是一个非常有用的配置，此处的构建模式不完全等于"),a("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/mode-and-env.html#%E6%A8%A1%E5%BC%8F",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-cli@3 的模式"),a("OutboundLink")],1),t._v("，我们只是通过 vue-cli@3 的模式机制，动态赋值"),a("code",[t._v("VUE_APP_MODE")]),t._v("常量，并在环境变量中根据"),a("code",[t._v("VUE_APP_MODE")]),t._v("的值动态切换变量对象。")]),t._v(" "),t._m(16),t._v(" "),t._m(17),a("p",[t._v("这样做的目的也是为了我们能够集中的管理环境变量。见下文。")]),t._v(" "),t._m(18),t._v(" "),a("p",[t._v("环境变量记录着整个模块用到的各种依环境不同而不同的常量。在项目任意地方导入后可以直接使用常量，避免了手动或通过 CI 另外配置替换环境变量的麻烦事儿。")]),t._v(" "),t._m(19),a("p",[t._v("使用：")]),t._v(" "),t._m(20),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),a("p",[t._v("key值为模块名称，value为部署地址。")]),t._v(" "),t._m(24),t._m(25)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"模块配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模块配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 模块配置")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"danger custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),s("p",[this._v("本页文档正在撰写中，请勿参考。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("可配置项通过"),s("code",[this._v("/src/config.js")]),this._v("文件进行配置。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"基本信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本信息","aria-hidden":"true"}},[this._v("#")]),this._v(" 基本信息")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"name"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#name","aria-hidden":"true"}},[this._v("#")]),this._v(" name")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("类型："),s("code",[this._v("String")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("模块名称遵从 npm 包命名规范，单词小写，多单词使用"),s("code",[this._v("-")]),this._v("连接。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"version"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#version","aria-hidden":"true"}},[this._v("#")]),this._v(" version")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("类型："),s("code",[this._v("String")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"author"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#author","aria-hidden":"true"}},[this._v("#")]),this._v(" author")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("类型："),s("code",[this._v("name <email>")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"外部依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#外部依赖","aria-hidden":"true"}},[this._v("#")]),this._v(" 外部依赖")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("/src/externals.js")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" jquery "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'jquery'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" axios "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'axios'")]),t._v("\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" jquery\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("axios "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" axios\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这个文件会在"),s("code",[this._v("/src/main.js")]),this._v("中首先被导入，所以在我们的项目文件中无需导入，可以直接使用添加在 window 上的全局变量。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"构建模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构建模式","aria-hidden":"true"}},[this._v("#")]),this._v(" 构建模式")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v(".env.test42")]),this._v("文件为例：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("NODE_ENV"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("production "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 以生产配置构建")]),t._v("\nVUE_APP_MODE"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("test42 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置VUE_APP_MODE值")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境变量","aria-hidden":"true"}},[this._v("#")]),this._v(" 环境变量")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 项目中中所使用的常量")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" _env "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  development"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开发环境")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API_BASE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:8083'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  production"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 正式生产环境")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API_BASE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://qingjin.me'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  test42"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 42测试环境")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API_BASE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://test42.com'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" env "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VUE_APP_MODE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过构建模式来动态获取环境变量")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" env "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/config'")]),t._v("\naxios"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API_BASE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/something'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("希望根据不同运行环境进行切换的变量一定要拥有相同的"),s("code",[this._v("key")]),this._v("值。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"模块库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模块库","aria-hidden":"true"}},[this._v("#")]),this._v(" 模块库")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("框架开发者从远程模块开发者处得到远程模块的部署地址列表，按不同的环境配置在"),s("code",[this._v("_moduleLibs")]),this._v("对象中。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 远程模块列表")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" _moduleLibs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  development"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    clkm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://qingjin.me/clkm.umd.js'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  production"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    clkm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://qingjin.me/clkm.umd.js'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  test42"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    clkm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://test42.com/clkm.umd.js'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" moduleLibs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _moduleLibs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VUE_APP_MODE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("moduleLibs")]),this._v("对象会被导入路由配置文件，在获取远程模块时通过"),s("code",[this._v("route.path")]),this._v("动态选取模块地址。")])}],!1,null,null,null);s.default=e.exports}}]);