(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{202:function(t,a,s){t.exports=s.p+"assets/img/intro.7da2d9bf.png"},203:function(t,a,s){t.exports=s.p+"assets/img/group.3699368f.png"},204:function(t,a,s){t.exports=s.p+"assets/img/level.1e7a8035.png"},212:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),n("p",[t._v("本工具停止维护，请使用"),n("a",{attrs:{href:"https://mqhe2007.github.io/vue-module-loader/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-module-loader"),n("OutboundLink")],1)])]),t._v(" "),n("h1",{attrs:{id:"指南"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#指南"}},[t._v("#")]),t._v(" 指南")]),t._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),n("p",[t._v("开始使用 Admincraft 前，我们假设您已经拥有了创建或使用 vue + webpack 工程的开发经验。")])]),t._v(" "),n("p",[t._v("Admincraft，名称借鉴自“Minecraft”。也是希望 Admincraft 能够像“Minecraft”一样成为一个灵活自由强大的开发工具，为中后台应用的快速开发寻找新的可能。")]),t._v(" "),n("p",[t._v("Admincraft 在 Vue 已有 API 的基础上进行了更高级的 API 封装。令 Admincraft 支持除传统的单一工程开发外也支持模块化分离开发，开发完成的模块可以分布部署，并在另一个模块运行时热加载到主系统中。")]),t._v(" "),n("p",[n("img",{attrs:{src:s(202),alt:"level"}})]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("p",[t._v("Admincraft 做了很多的约定和预设，如果您只是想简单的拥有加载远程模块的能力，不妨只使用"),n("a",{attrs:{href:"https://github.com/mqhe2007/vue-module-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-module-loader"),n("OutboundLink")],1),t._v("试试看。")])]),t._v(" "),n("p",[t._v("欢迎进群交流。")]),t._v(" "),n("p",[n("img",{attrs:{src:s(203),alt:"qq群"}})]),t._v(" "),n("h2",{attrs:{id:"内置工具库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#内置工具库"}},[t._v("#")]),t._v(" 内置工具库")]),t._v(" "),n("p",[t._v("Admincraft 内置了下列工具库，无需再次安装。")]),t._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://cn.vuejs.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://vue-meta.nuxtjs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-meta"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://router.vuejs.org/zh/",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-router"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://vuex.vuejs.org/zh/",target:"_blank",rel:"noopener noreferrer"}},[t._v("vuex"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://github.com/axios/axios",target:"_blank",rel:"noopener noreferrer"}},[t._v("axios"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://github.com/ustbhuangyi/better-scroll",target:"_blank",rel:"noopener noreferrer"}},[t._v("better-scroll"),n("OutboundLink")],1)])])]),t._v(" "),n("h2",{attrs:{id:"视图层次"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#视图层次"}},[t._v("#")]),t._v(" 视图层次")]),t._v(" "),n("p",[t._v("为了使应用的页面布局灵活多变，不局限为单一的控制台布局，Admincraft 自带的用户界面采用了"),n("code",[t._v("布局 > 页面 > 组件")]),t._v("的层级结构。如下图：")]),t._v(" "),n("p",[n("img",{attrs:{src:s(204),alt:"level"}})]),t._v(" "),n("h3",{attrs:{id:"布局"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#布局"}},[t._v("#")]),t._v(" 布局")]),t._v(" "),n("p",[t._v("布局是系统最顶层的"),n("a",{attrs:{href:"https://router.vuejs.org/zh/guide/essentials/nested-routes.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("路由出口"),n("OutboundLink")],1),t._v("。通过配置 Admincraft 布局，可以实现：控制台，空页面，错误等页面。")]),t._v(" "),n("p",[t._v("在"),n("router-link",{attrs:{to:"/options/#路由选项配置"}},[t._v("路由选项")]),t._v("中未配置"),n("code",[t._v("layout")]),t._v("选项时，Admincraft 默认布局名称为"),n("code",[t._v("layoutDefault")]),t._v("，会输出“布局未找到提示”，并且子路由页面不会被输出。")],1),t._v(" "),n("p",[t._v("可以使用 "),n("router-link",{attrs:{to:"/api/#app-addlayout"}},[t._v("添加布局")]),t._v(" API 设置同名布局进行重设。")],1),t._v(" "),n("h3",{attrs:{id:"页面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#页面"}},[t._v("#")]),t._v(" 页面")]),t._v(" "),n("p",[t._v("页面是路由渲染的目标组件，相当于传统项目中的"),n("code",[t._v("html")]),t._v("页面，一个页面由若干个组件联合构成。")]),t._v(" "),n("h3",{attrs:{id:"组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#组件"}},[t._v("#")]),t._v(" 组件")]),t._v(" "),n("p",[t._v("这里所说的组件是指除布局，页面这些专用组件外，其他的"),n("code",[t._v(".vue")]),t._v("单文件组件。")]),t._v(" "),n("h2",{attrs:{id:"admincraft-实例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#admincraft-实例"}},[t._v("#")]),t._v(" Admincraft 实例")]),t._v(" "),n("p",[t._v("每个应用或模块都是通过"),n("code",[t._v("Admincraft")]),t._v("类创建一个新的 Admincraft 实例开始的，Admincraft 实例本质上是一个增强了 API 的 Vue 实例，同时具备 Vue 实例的所有属性和方法（有待尝试）。")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" admincraft "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Admincraft")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 选项")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("当创建一个 Admincraft 实例时，你可以传入一个选项对象作为实例化配置，详细选项请查看"),n("router-link",{attrs:{to:"/options/#实例化选项"}},[t._v("实例化选项")]),t._v("。")],1),t._v(" "),n("h3",{attrs:{id:"挂载实例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#挂载实例"}},[t._v("#")]),t._v(" 挂载实例")]),t._v(" "),n("p",[t._v("做完了以上那些内容，如果你启动一个开发服务，发现并不能在浏览器窗口中看到内容。因为当我们实例化 Admincraft 后仅仅是得到了一个存在于浏览器文档之外的实例对象："),n("code",[t._v("admincraft")]),t._v("。我们接下来要做的就是使用 Vue 实例方法"),n("code",[t._v("$mount")]),t._v("把 Vue 实例挂载到一个 DOM 元素上。"),n("a",{attrs:{href:"https://cn.vuejs.org/v2/api/#vm-mount",target:"_blank",rel:"noopener noreferrer"}},[t._v("学习$mount"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("通常代码看起来是这个样子：")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" el "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 是否新建元素取决于你想怎么做，如果你想挂载实例到一个已存在于你index.html文件中的元素上。\n * $mount方法同样可以接收一个选择器字符串作为参数。\n **/")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" admincraft "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Admincraft")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  theme"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'应用名称'")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nadmincraft"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$mount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("刷新浏览器，此时应该可以看到 admincraft 的默认界面了。")]),t._v(" "),n("h3",{attrs:{id:"路由配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#路由配置"}},[t._v("#")]),t._v(" 路由配置")]),t._v(" "),n("p",[t._v("通常我们使用 Vue 来做项目，实例化的同时就会传入 vue-router 配置。Admincraft 也是这么做的，只不过是发生在 Admincraft 内部，我们并不需要关心细节，而且借助于"),n("code",[t._v("addRoutes")]),t._v("API，我们可以在实例化之后再添加路由配置。")]),t._v(" "),n("p",[t._v("通常我们新建一个路由配置文件，导出符合路由规范的数组。")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("p",[t._v("路由的 name 在 Admincraft 中非常重要。我们使用 name 进行路由导航，匹配菜单，匹配页签等，一定要记得配置，并且具有唯一性。")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// routes.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Login "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./views/Login.vue'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/login'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'login'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    meta"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      NonMenu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'请登录'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      layout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'blank'")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    component"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Login\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("p",[n("strong",[t._v("这里有个特殊情况：")]),t._v("\n如果您使用了"),n("code",[t._v("admincraft-ui")]),t._v("模块，为了实现"),n("router-link",{attrs:{to:"/ui/#首页配置"}},[t._v("动态可变的控制台首页")]),t._v("，"),n("code",[t._v("/")]),t._v("根路由，已经在"),n("code",[t._v("admincraft-ui")]),t._v("内部配置过了，请不要再次配置。")],1)]),t._v(" "),n("p",[t._v("路由配置可以在"),n("router-link",{attrs:{to:"/guide/#模块是什么"}},[t._v("模块初始化函数")]),t._v("中使用原型方法"),n("code",[t._v("$addRoutes")]),t._v("进行加载，也可以在 Admincraft 实例化后使用实例方法"),n("code",[t._v("$addRoutes")]),t._v("加载。")],1),t._v(" "),n("h3",{attrs:{id:"状态配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#状态配置"}},[t._v("#")]),t._v(" 状态配置")]),t._v(" "),n("p",[t._v("情况和路由配置类似，并且使用了"),n("a",{attrs:{href:"https://vuex.vuejs.org/zh/guide/modules.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vuex 模块"),n("OutboundLink")],1),t._v("的概念，您必须掌握其使用方法。")]),t._v(" "),n("p",[t._v("通常我们新建一个 Vuex 模块配置文件。")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// store.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" storeModule "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mutations"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  actions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  getters"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" storeModule\n")])])]),n("p",[t._v("加载方式和路由配置同理，请参考 API。")]),t._v(" "),n("h3",{attrs:{id:"使用-vue-插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-vue-插件"}},[t._v("#")]),t._v(" 使用 Vue 插件")]),t._v(" "),n("p",[t._v("在实例化之前使用全局 API："),n("router-link",{attrs:{to:"/api/#admincraft-use"}},[t._v("Admincraft.use")]),t._v("进行加载。")],1),t._v(" "),n("h2",{attrs:{id:"加载一个模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#加载一个模块"}},[t._v("#")]),t._v(" 加载一个模块")]),t._v(" "),n("p",[t._v("在 Admincraft 项目中我们有两种方式加载模块。")]),t._v(" "),n("h3",{attrs:{id:"实例化前加载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实例化前加载"}},[t._v("#")]),t._v(" 实例化前加载")]),t._v(" "),n("p",[t._v("Admincraft 实例化前可以通过"),n("router-link",{attrs:{to:"/api/#admincraft-add"}},[t._v("Admincraft.add")]),t._v("方法添加一个模块。")],1),t._v(" "),n("h3",{attrs:{id:"运行时加载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#运行时加载"}},[t._v("#")]),t._v(" 运行时加载")]),t._v(" "),n("p",[t._v("应用运行时在任何时候可以通过实例方法"),n("router-link",{attrs:{to:"/api/#app-moduleloader"}},[t._v("$moduleLoader")]),t._v("进行加载。")],1),t._v(" "),n("h2",{attrs:{id:"编写一个模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编写一个模块"}},[t._v("#")]),t._v(" 编写一个模块")]),t._v(" "),n("h3",{attrs:{id:"模块是什么"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#模块是什么"}},[t._v("#")]),t._v(" 模块是什么")]),t._v(" "),n("p",[t._v("文件导出一个接收 Admincraft 实例上下文对象的函数，并且在函数内部合并数据的都算是一个模块。我们通常使用"),n("code",[t._v("/src/module-init.js")]),t._v("文件作为模块 build 入口文件。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /src/module-init.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" LayoutFrame "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/layout/Frame'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" routes "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/router/routes.js'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" storeModule "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./store'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Vue "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$addLayout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" layoutDefault"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" LayoutFrame "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$addRoutes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$addStore")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'moduleName'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" storeModule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$addMenus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("借助于"),n("a",{attrs:{href:"https://cli.vuejs.org/zh/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue-cli"),n("OutboundLink")],1),t._v("脚手架工具创建模块工程，我们很容易的把代码打包成一个 Admincraft 模块。")]),t._v(" "),n("p",[t._v("一个 Admincraft 模块就是一个打包成 umd 规范的 js 库及相关资源。")]),t._v(" "),n("p",[t._v("打包为库的配置请参考："),n("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/build-targets.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("构建目标-库"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("这里有一个带有完整演示的模块项目："),n("a",{attrs:{href:"https://github.com/mqhe2007/admincraft-showcase",target:"_blank",rel:"noopener noreferrer"}},[t._v("admincraft-showcase"),n("OutboundLink")],1)]),t._v(" "),n("h3",{attrs:{id:"目录约定"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#目录约定"}},[t._v("#")]),t._v(" 目录约定")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("p",[t._v("注意，缩进代表目录层级。")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("dist ----------------- 编译完成后的发行代码目录\nnode_modules --------- nodejs项目依赖安装目录\npublic --------------- 不需要webpack打包的静态资源目录\n  libs --------------- 通过远程调用的第三方库目录\n  index.html --------- 开发预览的网页入口文件\nsrc ------------------ 源代码目录\n  assets ------------- 需要webpack打包编译的资源目录\n  components --------- 局部组件目录\n  layout ------------- 布局组件目录\n  router ------------- 路由配置目录\n    routes.js -------- 路由配置\n  store -------------- vuex状态管理配置\n    storeModule.js --- vuex状态模块化配置\n  views -------------- 视图组件目录，需要导入路由配置\n  App.vue ------------ Vue实例根组件\n  envConst ----------- 多环境常量配置\n  init.js ------------ 模块初始化文件，模块化打包的入口文件\n  libs.js ------------ 通过远程调用的第三方库清单文件\n  main.js ------------ 开发服务入口文件\n.browserslistrc ------ 浏览器支持情况配置\n.env.* --------------- 构建环境与模式配置\n.eslintrc.js --------- eslint的配置文件\n.gitignore ----------- git 提交忽略文件\nbabel.config.js ------ babel编译配置文件\npackage.json --------- npm包配置文件\npostcss.config.js ---- postcss样式处理配置文件\nREADME.md ------------ 自述文件\nvue.config.js -------- vue-cli配置文件\nyarn.lock ------------ npm依赖版本锁\n")])])]),n("h3",{attrs:{id:"依赖安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#依赖安装"}},[t._v("#")]),t._v(" 依赖安装")]),t._v(" "),n("h4",{attrs:{id:"公共依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#公共依赖"}},[t._v("#")]),t._v(" 公共依赖")]),t._v(" "),n("p",[t._v("公共依赖是指大部分模块都要用到的依赖库，例如统一的 UI 组件库。这类公共依赖会在主框架模块中安装，业务模块开发时只需优先加载主框架模块，无需额外安装公共依赖。")]),t._v(" "),n("h4",{attrs:{id:"私有依赖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#私有依赖"}},[t._v("#")]),t._v(" 私有依赖")]),t._v(" "),n("p",[t._v("私有依赖是指只有业务模块自己要使用的依赖库。安装后导入为局部变量使用。")]),t._v(" "),n("h3",{attrs:{id:"模块打包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#模块打包"}},[t._v("#")]),t._v(" 模块打包")]),t._v(" "),n("p",[t._v("下面是一个完整的模块打包入口例子：")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// /src/module-init.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导入模块数据")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" routes "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./router/routes'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" storeModule "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./store/storeModule'")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 从package.json中获取模块名称")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" moduleName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../package.json'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导出模块初始化函数")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("context")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册路由")]),t._v("\n  context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$addRoutes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("moduleName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'：路由注册完成'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册状态树")]),t._v("\n  context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$addStore")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("moduleName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" storeModule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("moduleName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'：状态注册完成'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册菜单")]),t._v("\n  context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$addMenus")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("moduleName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'：菜单注册完成'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"模块部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#模块部署"}},[t._v("#")]),t._v(" 模块部署")]),t._v(" "),n("p",[t._v("一个使用 nginx+jenkins 的模块部署过程如下：")]),t._v(" "),n("h4",{attrs:{id:"_1-新建模块虚拟机"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-新建模块虚拟机"}},[t._v("#")]),t._v(" 1. 新建模块虚拟机")]),t._v(" "),n("p",[t._v("在部署服务器中找到 nginx 虚拟机配置目录"),n("code",[t._v("*/**/nginx/conf/vhost")]),t._v("。")]),t._v(" "),n("p",[t._v("创建模块的"),n("code",[t._v("vhost")]),t._v("配置文件。")]),t._v(" "),n("p",[t._v("着重以下配置：")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("server{\n  # 监听端口号。\n  listen 8081;\n  location / {\n    # 虚拟机根目录，以模块名命名，用以存放构建生成的文件。\n    root /home/apps/<module_name>;\n  }\n}\n\n")])])]),n("h4",{attrs:{id:"_2-配置构建脚本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置构建脚本"}},[t._v("#")]),t._v(" 2. 配置构建脚本")]),t._v(" "),n("p",[t._v("登录 jenkins 构建工具创建新任务。")]),t._v(" "),n("h5",{attrs:{id:"执行-shell-第一步"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#执行-shell-第一步"}},[t._v("#")]),t._v(" 执行 shell 第一步")]),t._v(" "),n("p",[t._v("本段 shell 主要是模块打包命令，打包过程根据自己模块"),n("code",[t._v("package.json")]),t._v("中实际的脚本进行配置。")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("node -v\nyarn -v\nyarn\nyarn build\n")])])]),n("h5",{attrs:{id:"执行-shell-第二步"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#执行-shell-第二步"}},[t._v("#")]),t._v(" 执行 shell 第二步")]),t._v(" "),n("p",[t._v("把第一步打包完成的代码转移到部署服务器模块的虚拟机中。")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('ssh user@xxx.xxx.xxx.xxx "cd /home/apps\nrm -rf <module_name>\nmkdir <module_name>"\nscp -r ${WORKSPACE}/dist/* user@xxx.xxx.xxx.xxx:/home/apps/<module_name>\n')])])]),n("h4",{attrs:{id:"_3-验证模块地址"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-验证模块地址"}},[t._v("#")]),t._v(" 3. 验证模块地址")]),t._v(" "),n("p",[t._v("等待 jenkins 任务执行完毕，尝试访问"),n("code",[t._v("http://xxx.xxx.xxx.xxx:8081/<module_name>.umd.js")]),t._v("，如果能访问成功，既模块部署成功。")]),t._v(" "),n("h3",{attrs:{id:"模块开发"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#模块开发"}},[t._v("#")]),t._v(" 模块开发")]),t._v(" "),n("p",[t._v("从上文可知，代码打包成一个 Admincraft 模块可以用一个导出函数的入口文件"),n("code",[t._v("module-init.js")]),t._v("来实现。那作为一个 Admincraft 模块，我们如何去运行开发呢？")]),t._v(" "),n("p",[t._v("其实很简单，像传统的 Vue 工程一样，我们从"),n("code",[t._v("main.js")]),t._v("文件出发。我们只需要在我们的 "),n("code",[t._v("main.js")]),t._v(" 文件中导入模块要导出的初始化函数（"),n("code",[t._v("module-init.js")]),t._v(" ）和 "),n("code",[t._v("Admincraft")]),t._v("，我们当前开发服务所运行的代码就是一个 Admincraft 项目，我们就可以使用 Admincraft 创建实例，并在"),n("router-link",{attrs:{to:"/api/#admincraft-add"}},[t._v("实例化前添加我们的模块")]),t._v("。")],1),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// main.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Admincraft "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admincraft'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" showCase "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./init'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加一个模块")]),t._v("\nAdmincraft"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("showCase"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建实例")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" appElement "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Admincraft")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Showcase'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  logo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'showcase演示'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$mount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("appElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("然后，就能正常开发了，任何模块相关代码改动都会及时的更新在实例中。")]),t._v(" "),n("p",[t._v("这样在开发阶段既能同步使用 Admincraft 提供的 API，组件，布局等能力，又能保证开发出的模块能完美被其他 Admincraft 项目加载。")]),t._v(" "),n("h2",{attrs:{id:"事件总线"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#事件总线"}},[t._v("#")]),t._v(" 事件总线")]),t._v(" "),n("p",[t._v("为了提高模块与模块，模块与框架之间通信的灵活性，Admincraft 特别引入了事件总线。")]),t._v(" "),n("p",[t._v("事件总线本质上是 Vue 原型对象上的一个对象 "),n("code",[t._v("eventBus")]),t._v("，我们可以用来监听和触发一些事件。")]),t._v(" "),n("p",[t._v("每个模块需要提供自己的"),n("router-link",{attrs:{to:"/appendix/#事件列表"}},[t._v("事件列表")]),t._v("以供其他模块监听。反之，也可根据其他模块提供的事件列表按需监听。")],1),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("p",[t._v("为表明事件的不变性，Admincraft 约定使用常量标识事件名称，事件名称多个单词通过下划线"),n("code",[t._v("_")]),t._v("连接。")])]),t._v(" "),n("h3",{attrs:{id:"触发事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#触发事件"}},[t._v("#")]),t._v(" 触发事件")]),t._v(" "),n("p",[t._v("我们使用$eventBus.emit()方法可以触发一个自定义事件。")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$eventBus"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'EVENT_NAME'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" payloadData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h3",{attrs:{id:"监听事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#监听事件"}},[t._v("#")]),t._v(" 监听事件")]),t._v(" "),n("p",[t._v("我们使用$eventBus.on()方法可以监听一个自定义事件，同一个事件可以重复监听多次。")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$eventBus"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'EVENT_NAME'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("payloadData")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h3",{attrs:{id:"取消监听"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#取消监听"}},[t._v("#")]),t._v(" 取消监听")]),t._v(" "),n("p",[t._v("我们使用$eventBus.off()方法可以监听一个自定义事件。")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$eventBus"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("off")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'EVENT_NAME'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h2",{attrs:{id:"发起异步请求"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#发起异步请求"}},[t._v("#")]),t._v(" 发起异步请求")]),t._v(" "),n("p",[t._v("根据业务接口发起异步请求获取数据，是前后端分离的系统最重要的功能之一。Admincraft 内部封装了强大易用的 http 网络请求库"),n("a",{attrs:{href:"https://github.com/axios/axios",target:"_blank",rel:"noopener noreferrer"}},[t._v("axios"),n("OutboundLink")],1),t._v("，并在实例化时赋化身为"),n("code",[t._v("$http")]),t._v("对象，我们使用"),n("code",[t._v("$http")]),t._v("发起请求就像使用 axios 一样，例如：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$http\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'api/path'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("除了在 Admincraft 实例化时可以传入 http 配置，我们在使用实例方法"),n("code",[t._v("$http")]),t._v("时也可以随时修改请求配置，发起请求时传入的配置优先级大于实例化配置。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$http\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'api/path'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    timeout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当前接口的超时时间就会延长至5000ms")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);